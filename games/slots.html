<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slot Machine - Game Hub</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        .slot-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        .machine {
            background: linear-gradient(135deg, #8b0000, #b22222);
            border: 10px solid #ffd700;
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.5);
        }
        .reels {
            display: flex;
            gap: 10px;
            background: #000;
            padding: 20px;
            border-radius: 15px;
            border: 5px solid #333;
        }
        .reel {
            width: 80px;
            height: 100px;
            background: #fff;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            overflow: hidden;
        }
        .reel.spinning {
            animation: spin 0.1s linear infinite;
        }
        @keyframes spin {
            0% { transform: translateY(-10px); }
            100% { transform: translateY(10px); }
        }
        .balance-display {
            font-size: 2rem;
            color: #ffd700;
        }
        .bet-controls {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        .bet-btn {
            width: 40px;
            height: 40px;
            font-size: 1.5rem;
            border: none;
            border-radius: 50%;
            background: #ffd700;
            color: #000;
            cursor: pointer;
            transition: all 0.2s;
        }
        .bet-btn:hover {
            transform: scale(1.1);
        }
        .bet-amount {
            font-size: 1.5rem;
            color: #fff;
            min-width: 100px;
            text-align: center;
        }
        .spin-button {
            padding: 20px 60px;
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #ffd700, #ffaa00);
            border: none;
            border-radius: 30px;
            color: #000;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }
        .spin-button:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(255, 215, 0, 0.6);
        }
        .spin-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .message {
            font-size: 1.5rem;
            font-weight: bold;
            min-height: 50px;
        }
        .message.win { color: #00ff88; }
        .message.lose { color: #ff6b6b; }
        .paytable {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
        }
        .pay-row {
            display: flex;
            justify-content: space-between;
            padding: 5px 10px;
        }
        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <button id="fullscreenBtn" class="fullscreen-btn" title="Toggle Fullscreen">â›¶</button>
    <div class="container">
        <a href="../index.html" class="back-btn">â† Back to Games</a>
        
        <div class="game-container">
            <h1 class="game-title">ğŸ° Slot Machine</h1>
            
            <div class="slot-container">
                <div class="balance-display">Balance: $<span id="balance">1000</span></div>
                
                <div class="machine">
                    <div class="reels">
                        <div class="reel" id="reel1">ğŸ’</div>
                        <div class="reel" id="reel2">ğŸ‹</div>
                        <div class="reel" id="reel3">ğŸŠ</div>
                    </div>
                </div>
                
                <div class="message" id="message"></div>
                
                <div class="bet-controls">
                    <button class="bet-btn" id="decreaseBet">-</button>
                    <div class="bet-amount">Bet: $<span id="betAmount">10</span></div>
                    <button class="bet-btn" id="increaseBet">+</button>
                </div>
                
                <button class="spin-button" id="spinBtn">ğŸ° SPIN</button>
                
                <div class="paytable">
                    <div class="pay-row"><span>ğŸ’ğŸ’ğŸ’</span><span>x2</span></div>
                    <div class="pay-row"><span>ğŸ‹ğŸ‹ğŸ‹</span><span>x3</span></div>
                    <div class="pay-row"><span>ğŸŠğŸŠğŸŠ</span><span>x5</span></div>
                    <div class="pay-row"><span>ğŸ‡ğŸ‡ğŸ‡</span><span>x8</span></div>
                    <div class="pay-row"><span>ğŸ””ğŸ””ğŸ””</span><span>x10</span></div>
                    <div class="pay-row"><span>â­â­â­</span><span>x15</span></div>
                    <div class="pay-row"><span>ğŸ’ğŸ’ğŸ’</span><span>x25</span></div>
                    <div class="pay-row"><span>7ï¸âƒ£7ï¸âƒ£7ï¸âƒ£</span><span>x50</span></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const SYMBOLS = ['ğŸ’', 'ğŸ‹', 'ğŸŠ', 'ğŸ‡', 'ğŸ””', 'â­', 'ğŸ’', '7ï¸âƒ£'];
        const PAYOUTS = {
            'ğŸ’': 2,
            'ğŸ‹': 3,
            'ğŸŠ': 5,
            'ğŸ‡': 8,
            'ğŸ””': 10,
            'â­': 15,
            'ğŸ’': 25,
            '7ï¸âƒ£': 50
        };
        
        // Weighted probabilities (lower = rarer)
        const WEIGHTS = [30, 25, 20, 15, 10, 8, 5, 2];

        let balance = 1000;
        let bet = 10;
        let spinning = false;

        const reel1 = document.getElementById('reel1');
        const reel2 = document.getElementById('reel2');
        const reel3 = document.getElementById('reel3');
        const balanceEl = document.getElementById('balance');
        const betAmountEl = document.getElementById('betAmount');
        const messageEl = document.getElementById('message');

        function init() {
            document.getElementById('spinBtn').addEventListener('click', spin);
            document.getElementById('increaseBet').addEventListener('click', () => changeBet(10));
            document.getElementById('decreaseBet').addEventListener('click', () => changeBet(-10));
            document.getElementById('fullscreenBtn').addEventListener('click', toggleFullscreen);
        }

        function changeBet(amount) {
            bet = Math.max(10, Math.min(100, bet + amount));
            betAmountEl.textContent = bet;
        }

        function getRandomSymbol() {
            const totalWeight = WEIGHTS.reduce((a, b) => a + b, 0);
            let random = Math.random() * totalWeight;
            for (let i = 0; i < SYMBOLS.length; i++) {
                random -= WEIGHTS[i];
                if (random <= 0) return SYMBOLS[i];
            }
            return SYMBOLS[0];
        }

        async function spin() {
            if (spinning || balance < bet) return;
            
            spinning = true;
            balance -= bet;
            balanceEl.textContent = balance;
            messageEl.textContent = '';
            messageEl.className = 'message';
            
            reel1.classList.add('spinning');
            reel2.classList.add('spinning');
            reel3.classList.add('spinning');
            
            // Spinning animation
            const spinInterval = setInterval(() => {
                reel1.textContent = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
                reel2.textContent = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
                reel3.textContent = SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
            }, 50);
            
            // Stop reels one by one
            const results = [getRandomSymbol(), getRandomSymbol(), getRandomSymbol()];
            
            await new Promise(r => setTimeout(r, 1000));
            reel1.classList.remove('spinning');
            reel1.textContent = results[0];
            
            await new Promise(r => setTimeout(r, 500));
            reel2.classList.remove('spinning');
            reel2.textContent = results[1];
            
            await new Promise(r => setTimeout(r, 500));
            clearInterval(spinInterval);
            reel3.classList.remove('spinning');
            reel3.textContent = results[2];
            
            // Check for win
            if (results[0] === results[1] && results[1] === results[2]) {
                const winAmount = bet * PAYOUTS[results[0]];
                balance += winAmount;
                balanceEl.textContent = balance;
                messageEl.textContent = `ğŸ‰ ${results[0]}${results[0]}${results[0]} WIN $${winAmount}!`;
                messageEl.className = 'message win';
            } else if (results[0] === results[1] || results[1] === results[2] || results[0] === results[2]) {
                // Small win for 2 matching
                const winAmount = Math.floor(bet * 0.5);
                balance += winAmount;
                balanceEl.textContent = balance;
                messageEl.textContent = `Two match! +$${winAmount}`;
                messageEl.className = 'message';
            } else {
                messageEl.textContent = 'Try again!';
                messageEl.className = 'message lose';
            }
            
            if (balance <= 0) {
                messageEl.textContent = 'Game Over! Refresh to restart.';
            }
            
            spinning = false;
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        init();
    </script>
</body>
</html>
